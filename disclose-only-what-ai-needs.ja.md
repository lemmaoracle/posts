---
slug: "disclose-only-what-ai-needs"
date: "2026.02.28"
category: "Guides"
section: "Essays"
title: "AI に必要なものだけを開示する"
abstract: "選択的開示により、ホルダーはモデルが必要とする属性だけを公開でき、元の発行者署名との紐づけは維持されます。"
---

## 選択的開示の課題

署名済みドキュメントには多くのフィールドが含まれます。KYC レコードには氏名、生年月日、住所、国籍、ID 番号、確認状態が含まれるかもしれません。しかしレンディングプロトコルが知る必要があるのは「この人物は確認済みで制裁対象外か？」だけであり、自宅住所ではありません。

選択的開示がなければ、すべてを共有するか何も共有しないかの二択を迫られます。Lemma は第三の選択肢を導入します：必要なフィールドだけを、それが元の署名済みドキュメントに含まれることの暗号学的証明とともに共有するということです。

## BBS+ 選択的開示の仕組み

Lemma はデフォルトの選択的開示メカニズムとして BBS+ 署名を使用します。フローは2つのフェーズです：

**発行者がドキュメント全体に署名：**

```typescript
import { disclose } from "@lemmaoracle/sdk";

const signed = await disclose.sign(client, {
  payload: rawDoc,
  issuerKey: issuerPrivateKey,
});
```

**ホルダーが選択した属性のみを公開：**

```typescript
const sd = await disclose.reveal(client, {
  signedPayload: signed.signature,
  attributes: ["age"],
});
// sd.disclosed → { age: 25 }
// sd.proof     → BBS+ 選択的開示証明
```

この証明は `{ age: 25 }` が発行者の署名したドキュメントの一部であることを数学的に保証し、他のフィールドは一切公開しません。検証者がドキュメント全体を見ることはありません。

## 部分ビューでも出所は保持される

選択的開示でよくある懸念はコンテキストの喪失です。1つのフィールドしか見えない場合、それが信頼できるとどうわかるのか？

Lemma では、開示された属性は完全な出所を伴います：

- 元ドキュメントに署名した発行者。
- 属性の型と正規化を定義するスキーマ。
- 開示された値を元の BBS+ 署名に紐づける証明。
- ドキュメントの存在をアンカーするオンチェーンレジストリエントリ。

単一の開示フィールドであっても、暗号学的証拠の切れ目のないチェーンを通じて起源まで遡れます。

## ロールベース・当事者別ビュー

同じドキュメントでも、利用者によって必要なビューが異なります：

- レンディングプロトコルは `{ verified: true, not_sanctioned: true }` を見る。
- 年齢制限サービスは `{ age_bucket: "adult" }` を見る。
- 内部監査人は `{ country: "JP", verification_date: "2026-01-15" }` を見る。

各ビューは同じ署名済みドキュメントから、`disclose.reveal` に異なる `attributes` 配列を渡すことで生成されます。データの別コピーは作成されず、別の署名儀式も不要です。

## 将来を見据えた設計

SDK の `disclose` 名前空間は暗号スキームではなく、実行する機能にちなんで命名されています。初期実装は BBS+ ですが、API は SD-JWT やその他のメカニズムを開発者向けインターフェースの変更なしにサポートできるよう設計されています。`disclose.reveal` を呼ぶとき、あなたが表現しているのは意図（「これらのフィールドだけ見せて」）であり、特定のアルゴリズムの選択ではありません。
